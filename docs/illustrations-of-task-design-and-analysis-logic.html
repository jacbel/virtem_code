<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences</title>
  <meta name="description" content="3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://jacbel.github.io/virtem_code/" />
  
  <meta property="og:description" content="3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences" />
  <meta name="github-repo" content="jacbel/virtem_code" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences" />
  
  <meta name="twitter:description" content="3 Illustrations of Task Design and Analysis Logic | Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences" />
  

<meta name="author" content="Jacob L. S. Bellmund" />


<meta name="date" content="2022-01-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analysis-setup.html"/>
<link rel="next" href="prepare-behavioral-data.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#purpose"><i class="fa fa-check"></i><b>1.1</b> Purpose</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#contents"><i class="fa fa-check"></i><b>1.2</b> Contents</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#contact"><i class="fa fa-check"></i><b>1.3</b> Contact</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#license-information"><i class="fa fa-check"></i><b>1.4</b> License Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="analysis-setup.html"><a href="analysis-setup.html"><i class="fa fa-check"></i><b>2</b> Analysis Setup</a>
<ul>
<li class="chapter" data-level="2.1" data-path="analysis-setup.html"><a href="analysis-setup.html#defining-variables-and-folders"><i class="fa fa-check"></i><b>2.1</b> Defining Variables and Folders</a>
<ul>
<li class="chapter" data-level="" data-path="analysis-setup.html"><a href="analysis-setup.html#folder-structure"><i class="fa fa-check"></i>Folder Structure</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="analysis-setup.html"><a href="analysis-setup.html#define-analysis-functions"><i class="fa fa-check"></i><b>2.2</b> Define Analysis Functions</a>
<ul>
<li class="chapter" data-level="" data-path="analysis-setup.html"><a href="analysis-setup.html#analysis-logic"><i class="fa fa-check"></i>Analysis Logic</a></li>
<li class="chapter" data-level="" data-path="analysis-setup.html"><a href="analysis-setup.html#brain-plots-in-ggplot"><i class="fa fa-check"></i>Brain Plots in ggplot</a></li>
<li class="chapter" data-level="" data-path="analysis-setup.html"><a href="analysis-setup.html#ggbrain-functions-to-get-template-background"><i class="fa fa-check"></i>ggBrain functions to get template background</a></li>
<li class="chapter" data-level="" data-path="analysis-setup.html"><a href="analysis-setup.html#waiting-for-cluster-jobs"><i class="fa fa-check"></i>Waiting for Cluster Jobs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html"><i class="fa fa-check"></i><b>3</b> Illustrations of Task Design and Analysis Logic</a>
<ul>
<li class="chapter" data-level="3.1" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#day-learning-task-design"><i class="fa fa-check"></i><b>3.1</b> Day Learning Task Design</a>
<ul>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#events-in-virtual-and-real-time"><i class="fa fa-check"></i>Events in virtual and real time</a></li>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#events-in-virtual-time"><i class="fa fa-check"></i>Events in virtual time</a></li>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#events-in-real-time"><i class="fa fa-check"></i>Events in real time</a></li>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#correlations-of-virtual-time-with-order-and-real-time"><i class="fa fa-check"></i>Correlations of virtual time with order and real time</a></li>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#time-cues-in-virtual-and-real-time"><i class="fa fa-check"></i>Time cues in virtual and real time</a></li>
<li class="chapter" data-level="" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#supplemental-figure-for-task-design"><i class="fa fa-check"></i>Supplemental figure for task design</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="illustrations-of-task-design-and-analysis-logic.html"><a href="illustrations-of-task-design-and-analysis-logic.html#representational-similarity-analysis-logic"><i class="fa fa-check"></i><b>3.2</b> Representational Similarity Analysis Logic</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="prepare-behavioral-data.html"><a href="prepare-behavioral-data.html"><i class="fa fa-check"></i><b>4</b> Prepare behavioral data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="prepare-behavioral-data.html"><a href="prepare-behavioral-data.html#sorting-task"><i class="fa fa-check"></i><b>4.1</b> Sorting task</a></li>
<li class="chapter" data-level="4.2" data-path="prepare-behavioral-data.html"><a href="prepare-behavioral-data.html#timeline-task"><i class="fa fa-check"></i><b>4.2</b> Timeline task</a></li>
<li class="chapter" data-level="4.3" data-path="prepare-behavioral-data.html"><a href="prepare-behavioral-data.html#picture-viewing-tasks"><i class="fa fa-check"></i><b>4.3</b> Picture viewing tasks</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html"><i class="fa fa-check"></i><b>5</b> Behavioral Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#sorting-task-1"><i class="fa fa-check"></i><b>5.1</b> Sorting Task</a>
<ul>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#calculate-percentage-of-correct-responses"><i class="fa fa-check"></i>Calculate percentage of correct responses</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#plot-sorting-performance"><i class="fa fa-check"></i>Plot sorting performance</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#sorting-errors-as-a-function-of-sequence-position"><i class="fa fa-check"></i>Sorting errors as a function of sequence position</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#timeline-task-1"><i class="fa fa-check"></i><b>5.2</b> Timeline Task</a>
<ul>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#visualize-the-raw-data"><i class="fa fa-check"></i>Visualize the raw data</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#accuracy-of-remembered-times"><i class="fa fa-check"></i>Accuracy of remembered times</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#relationship-of-sorting-errors-and-timeline-errors"><i class="fa fa-check"></i>Relationship of sorting errors and timeline errors</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#time-metrics-underlying-remembered-times"><i class="fa fa-check"></i>Time metrics underlying remembered times</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#compose-figure-for-behavioral-data"><i class="fa fa-check"></i>Compose Figure for Behavioral Data</a></li>
<li class="chapter" data-level="5.3" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#generalization-bias"><i class="fa fa-check"></i><b>5.3</b> Generalization bias</a>
<ul>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#quantify-relative-time-of-other-events"><i class="fa fa-check"></i>Quantify relative time of other events</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#test-generalization-bias"><i class="fa fa-check"></i>Test Generalization Bias</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#replication-of-generalization-bias"><i class="fa fa-check"></i><b>5.4</b> Replication of Generalization Bias</a>
<ul>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#replication-data-quantify-relative-time-of-other-events"><i class="fa fa-check"></i>Replication data: Quantify relative time of other events</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#replication-data-test-generalization-bias"><i class="fa fa-check"></i>Replication data: Test Generalization Bias</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#swap-errors"><i class="fa fa-check"></i><b>5.5</b> Swap Errors</a>
<ul>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#descriptives-of-swap-errors"><i class="fa fa-check"></i>Descriptives of swap errors</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#swap-errors-as-a-function-of-sequence-position"><i class="fa fa-check"></i>Swap errors as a function of sequence position</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#swap-error-more-frequent-than-expected-from-chance"><i class="fa fa-check"></i>Swap error: More frequent than expected from chance?</a></li>
<li class="chapter" data-level="" data-path="behavioral-analysis.html"><a href="behavioral-analysis.html#swap-errors-and-generalization-bias"><i class="fa fa-check"></i>Swap errors and generalization bias</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html"><i class="fa fa-check"></i><b>6</b> Prepare (f)MRI Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#regions-of-interest"><i class="fa fa-check"></i><b>6.1</b> Regions of Interest</a>
<ul>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#freesurfer-masks"><i class="fa fa-check"></i>FreeSurfer Masks</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#subregion-masks-mni"><i class="fa fa-check"></i>Subregion masks (MNI)</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#final-rois-from-intersection-of-masks"><i class="fa fa-check"></i>Final ROIs from intersection of masks</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#group-level-masks"><i class="fa fa-check"></i><b>6.2</b> Group-Level Masks</a>
<ul>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#probabilistic-rois-for-visualization"><i class="fa fa-check"></i>Probabilistic ROIs for visualization</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#field-of-view-mask-for-visualization"><i class="fa fa-check"></i>Field of view mask for visualization</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#gray-matter-mask"><i class="fa fa-check"></i>Gray matter mask</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#small-volume-correction-mask"><i class="fa fa-check"></i>Small Volume Correction Mask</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#quantify-representational-change"><i class="fa fa-check"></i><b>6.3</b> Quantify Representational Change</a>
<ul>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#get-multi-voxel-patterns-from-rois"><i class="fa fa-check"></i>Get multi-voxel patterns from ROIs</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#calculate-correlation-matrices"><i class="fa fa-check"></i>Calculate correlation matrices</a></li>
<li class="chapter" data-level="" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#calculate-pattern-similarity-change"><i class="fa fa-check"></i>Calculate Pattern Similarity Change</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="prepare-fmri-data.html"><a href="prepare-fmri-data.html#combine-behavioral-and-fmri-data-for-rsa"><i class="fa fa-check"></i><b>6.4</b> Combine behavioral and fMRI data for RSA</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html"><i class="fa fa-check"></i><b>7</b> Run RSA Searchlight</a>
<ul>
<li class="chapter" data-level="7.1" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#prepare-functional-data"><i class="fa fa-check"></i><b>7.1</b> Prepare functional data</a>
<ul>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#data-cleaning-extract-residuals-from-motion-parameter-regression"><i class="fa fa-check"></i>Data cleaning: Extract residuals from motion parameter regression</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#extract-relevant-volumes-1"><i class="fa fa-check"></i>Extract relevant volumes</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#concatenate-relevant-volumes"><i class="fa fa-check"></i>Concatenate relevant volumes</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#first-level-rsa-searchlight"><i class="fa fa-check"></i><b>7.2</b> First-level RSA searchlight</a>
<ul>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#set-analysis-parameters"><i class="fa fa-check"></i>Set analysis parameters</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#prepare-rsa-predictions"><i class="fa fa-check"></i>Prepare RSA-predictions</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#create-lookup-table-for-searchlight"><i class="fa fa-check"></i>Create lookup table for searchlight</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#dataframe-with-input-for-analysis"><i class="fa fa-check"></i>Dataframe with input for analysis</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#searchlight-implementation"><i class="fa fa-check"></i>Searchlight implementation</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#group-level-searchlight-analysis"><i class="fa fa-check"></i><b>7.3</b> Group-level searchlight analysis</a>
<ul>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#move-first-level-images-to-mni-space"><i class="fa fa-check"></i>Move first-level images to MNI space</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#merge-and-smooth-first-level-images"><i class="fa fa-check"></i>Merge and smooth first-level images</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#run-fsl-randomise"><i class="fa fa-check"></i>Run FSL Randomise</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#find-searchlight-clusters-and-atlas-labels"><i class="fa fa-check"></i>Find searchlight clusters and atlas labels</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#create-outlines-of-significant-clusters"><i class="fa fa-check"></i>Create outlines of significant clusters</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#prepare-rsa-in-searchlight-peak"><i class="fa fa-check"></i><b>7.4</b> Prepare RSA in searchlight peak</a>
<ul>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#create-the-roi-mask"><i class="fa fa-check"></i>Create the ROI mask</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#calculating-the-correlation-matrices"><i class="fa fa-check"></i>Calculating the correlation matrices</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#calculate-pattern-similarity-change-1"><i class="fa fa-check"></i>Calculate Pattern Similarity Change</a></li>
<li class="chapter" data-level="" data-path="run-rsa-searchlight.html"><a href="run-rsa-searchlight.html#combine-behavioral-and-fmri-data-for-rsa-1"><i class="fa fa-check"></i>Combine behavioral and fMRI data for RSA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html"><i class="fa fa-check"></i><b>8</b> RSA on Pattern Similarity Change</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#time-metrics-to-quantify-event-relations"><i class="fa fa-check"></i><b>8.1</b> Time metrics to quantify event relations</a></li>
<li class="chapter" data-level="8.2" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#visualize-regions-of-interests"><i class="fa fa-check"></i><b>8.2</b> Visualize Regions of Interests</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#template-background-image-with-fov"><i class="fa fa-check"></i>Template background image with FOV</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#anterior-hippocampus-roi"><i class="fa fa-check"></i>Anterior hippocampus ROI</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#anterior-lateral-entorhinal-cortex"><i class="fa fa-check"></i>Anterior-lateral entorhinal cortex</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#first-level-rsa"><i class="fa fa-check"></i><b>8.3</b> First-level RSA</a></li>
<li class="chapter" data-level="8.4" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-virtual-time-within-sequence"><i class="fa fa-check"></i><b>8.4</b> aHPC: virtual time within sequence</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#summary-statistics-3"><i class="fa fa-check"></i>Summary statistics</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#linear-mixed-effects-2"><i class="fa fa-check"></i>Linear Mixed Effects</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#representational-change-visualization"><i class="fa fa-check"></i>Representational Change Visualization</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#not-driven-by-first-last-event-pairs"><i class="fa fa-check"></i>Not driven by first &amp; last event pairs</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-virtual-time-within-sequence-when-including-order-real-time"><i class="fa fa-check"></i><b>8.5</b> aHPC: virtual time within sequence when including order &amp; real time</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#one-model-with-multiple-predictors"><i class="fa fa-check"></i>One model with multiple predictors</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#virtual-time-explains-residuals-of-order-and-real-time"><i class="fa fa-check"></i>Virtual time explains residuals of order and real time</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-virtual-time-across-sequences"><i class="fa fa-check"></i><b>8.6</b> aHPC: virtual time across sequences</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#summary-statistics-7"><i class="fa fa-check"></i>Summary statistics</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#linear-mixed-effects-5"><i class="fa fa-check"></i>Linear Mixed Effects</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#representational-change-visualization-1"><i class="fa fa-check"></i>Representational Change Visualization</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-virtual-time-across-sequence-when-including-order-real-time"><i class="fa fa-check"></i><b>8.7</b> aHPC: virtual time across sequence when including order &amp; real time</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#summary-statistics-8"><i class="fa fa-check"></i>Summary Statistics</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#linear-mixed-effects-6"><i class="fa fa-check"></i>Linear Mixed Effects</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-virtual-time-within-vs.-across-sequences"><i class="fa fa-check"></i><b>8.8</b> aHPC: virtual time within vs. across sequences</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#second-level-analysis"><i class="fa fa-check"></i>Second-level analysis</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#linear-mixed-effects-7"><i class="fa fa-check"></i>Linear Mixed Effects</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#interaction-of-sequence-membership-and-order"><i class="fa fa-check"></i>Interaction of sequence membership and order</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#interaction-of-sequence-membership-and-real-time"><i class="fa fa-check"></i>Interaction of sequence membership and real time</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#interaction-of-sequence-membership-and-virtual-time-when-including-interactions-with-other-time-metrics"><i class="fa fa-check"></i>Interaction of sequence membership and virtual time when including interactions with other time metrics</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#mds"><i class="fa fa-check"></i>MDS</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#umap"><i class="fa fa-check"></i>UMAP</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#alec"><i class="fa fa-check"></i><b>8.9</b> alEC</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#alec-virtual-time-withinacross-sequences-separately"><i class="fa fa-check"></i>alEC: virtual time within/across sequences separately</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#alec-virtual-time-within-vs.-across-sequences"><i class="fa fa-check"></i>alEC: virtual time within vs. across sequences</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#alec-virtual-time-for-all-event-pairs"><i class="fa fa-check"></i>alEC: virtual time for all event pairs</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#alec-virtual-time-for-all-event-pairs-when-including-order-real-time"><i class="fa fa-check"></i>alEC: virtual time for all event pairs when including order &amp; real time</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#ahpc-vs.-alec"><i class="fa fa-check"></i><b>8.10</b> aHPC vs. alEC</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#summary-statistics-12"><i class="fa fa-check"></i>Summary Statistics</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#linear-mixed-effects-10"><i class="fa fa-check"></i>Linear Mixed Effects</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#searchlight-results"><i class="fa fa-check"></i><b>8.11</b> Searchlight Results</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#virtual-time-within-sequence"><i class="fa fa-check"></i>Virtual Time Within Sequence</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#virtual-time-across-sequences-in-within-searchlight-cluster"><i class="fa fa-check"></i>Virtual Time Across Sequences in Within-Searchlight Cluster</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#virtual-time-across-sequences"><i class="fa fa-check"></i>Virtual Time Across Sequences</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#visualization-of-overlap"><i class="fa fa-check"></i>Visualization of Overlap</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#virtual-time-sequence-interaction"><i class="fa fa-check"></i>Virtual Time &amp; Sequence Interaction</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#exploratory-searchlight-results"><i class="fa fa-check"></i>Exploratory Searchlight Results</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#correlation-of-behavioral-generalization-bias-with-searchlight-effects"><i class="fa fa-check"></i><b>8.12</b> Correlation of behavioral generalization bias with searchlight effects</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#correlation-with-across-sequence-searchlight-effect"><i class="fa fa-check"></i>Correlation with across-sequence searchlight effect</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#correlation-with-same-sequence-searchlight-effect"><i class="fa fa-check"></i>Correlation with same-sequence searchlight effect</a></li>
</ul></li>
<li class="chapter" data-level="8.13" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#mixed-model-summaries"><i class="fa fa-check"></i><b>8.13</b> Mixed Model Summaries</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#supplemental-figure-1"><i class="fa fa-check"></i>Supplemental Figure</a></li>
<li class="chapter" data-level="" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#supplemental-tables"><i class="fa fa-check"></i>Supplemental Tables</a></li>
<li class="chapter" data-level="8.13.1" data-path="rsa-on-pattern-similarity-change.html"><a href="rsa-on-pattern-similarity-change.html#source-data"><i class="fa fa-check"></i><b>8.13.1</b> Source data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="signal-to-noise-ratio.html"><a href="signal-to-noise-ratio.html"><i class="fa fa-check"></i><b>9</b> Signal to noise ratio</a>
<ul>
<li class="chapter" data-level="9.1" data-path="signal-to-noise-ratio.html"><a href="signal-to-noise-ratio.html#calculate-voxel-wise-temporal-snr"><i class="fa fa-check"></i><b>9.1</b> Calculate voxel-wise temporal SNR</a></li>
<li class="chapter" data-level="9.2" data-path="signal-to-noise-ratio.html"><a href="signal-to-noise-ratio.html#average-tsnr-per-roi"><i class="fa fa-check"></i><b>9.2</b> Average tSNR per ROI</a></li>
<li class="chapter" data-level="9.3" data-path="signal-to-noise-ratio.html"><a href="signal-to-noise-ratio.html#contrast-tsnr-between-ahpc-and-alec"><i class="fa fa-check"></i><b>9.3</b> Contrast tSNR between aHPC and alEC</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html"><i class="fa fa-check"></i><b>10</b> RSA in searchlight peak with different threshold</a>
<ul>
<li class="chapter" data-level="10.1" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#prepare-rsa-in-searchlight-peak-1"><i class="fa fa-check"></i><b>10.1</b> Prepare RSA in searchlight peak</a>
<ul>
<li class="chapter" data-level="" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#create-the-roi-mask-1"><i class="fa fa-check"></i>Create the ROI mask</a></li>
<li class="chapter" data-level="" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#calculating-the-correlation-matrices-1"><i class="fa fa-check"></i>Calculating the correlation matrices</a></li>
<li class="chapter" data-level="" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#calculate-pattern-similarity-change-2"><i class="fa fa-check"></i>Calculate Pattern Similarity Change</a></li>
<li class="chapter" data-level="" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#combine-behavioral-and-fmri-data-for-rsa-2"><i class="fa fa-check"></i>Combine behavioral and fMRI data for RSA</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="rsa-in-searchlight-peak-with-different-threshold.html"><a href="rsa-in-searchlight-peak-with-different-threshold.html#rsa"><i class="fa fa-check"></i><b>10.2</b> RSA</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html"><i class="fa fa-check"></i><b>11</b> Univariate GLM: Relative time</a>
<ul>
<li class="chapter" data-level="11.1" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#copy-feat-folder-from-preprocessing-to-first-level-glm-directory"><i class="fa fa-check"></i><b>11.1</b> Copy FEAT-folder from Preprocessing to First-Level GLM directory</a></li>
<li class="chapter" data-level="11.2" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#prepare-glm"><i class="fa fa-check"></i><b>11.2</b> Prepare GLM</a>
<ul>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#compute-relative-time"><i class="fa fa-check"></i>Compute relative time</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#write-custom-ev-files-for-fsl-feat"><i class="fa fa-check"></i>Write custom EV files for FSL FEAT</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#glm-design-files"><i class="fa fa-check"></i>GLM Design files</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#prepare-confound-ev"><i class="fa fa-check"></i>Prepare confound EV</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#create-design-matrix"><i class="fa fa-check"></i>Create design matrix</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#run-1st-level-glm-on-htcondor"><i class="fa fa-check"></i><b>11.3</b> Run 1st-level GLM on HTCondor</a></li>
<li class="chapter" data-level="11.4" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#group-level-1"><i class="fa fa-check"></i><b>11.4</b> Group-level</a>
<ul>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#move-first-level-images-to-mni-space-1"><i class="fa fa-check"></i>Move first-level images to MNI space</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#merge-first-level-images"><i class="fa fa-check"></i>Merge first-level images</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#smooth-first-level-images"><i class="fa fa-check"></i>Smooth first-level images</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#average-first-level-images"><i class="fa fa-check"></i>Average first-level images</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#ahpc-roi-analysis"><i class="fa fa-check"></i>aHPC ROI analysis</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#run-fsl-randomise-1"><i class="fa fa-check"></i>Run FSL Randomise</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#results-in-ahpc-and-alec"><i class="fa fa-check"></i>Results in aHPC and alEC</a></li>
<li class="chapter" data-level="" data-path="univariate-glm-relative-time.html"><a href="univariate-glm-relative-time.html#fov-results"><i class="fa fa-check"></i>FOV results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="credit.html"><a href="credit.html"><i class="fa fa-check"></i><b>12</b> Credit</a>
<ul>
<li class="chapter" data-level="12.1" data-path="credit.html"><a href="credit.html#list-of-packages"><i class="fa fa-check"></i><b>12.1</b> List of packages</a></li>
<li class="chapter" data-level="12.2" data-path="credit.html"><a href="credit.html#references"><i class="fa fa-check"></i><b>12.2</b> References</a></li>
<li class="chapter" data-level="12.3" data-path="credit.html"><a href="credit.html#session-info"><i class="fa fa-check"></i><b>12.3</b> Session Info</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Structuring time: The hippocampus constructs sequence memories that generalize temporal relations across experiences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="illustrations-of-task-design-and-analysis-logic" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Illustrations of Task Design and Analysis Logic</h1>
<div id="day-learning-task-design" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Day Learning Task Design</h2>
<p>Here is a description of the design of the Day Learning Task from the methods section:</p>
<blockquote>
<p>In this task, 20 of the 21 scenes, which were shown in the picture viewing tasks, were presented repeatedly. This time, however, they were grouped into multiple sequences introduced to participants as “virtual days”. There were four different sequences, each comprising 5 events. Events from the same sequence were always shown in a specific order and with a specific time delay between them. Scenes were on screen for 1.5 s. At the end of each sequence, an image of a moon was shown for 5 s, then the next sequence began. Every sequence was presented 7 times. There were 7 mini-blocks in this task. Within each of these, every sequence was presented once. At the end of a mini-block, a 30-s break followed, then the next block started. The order in which the sequences were presented differed randomly across the 7 mini-blocks.</p>
<p>We instructed participants that the scenes depicted events from the life of a family and that the sequences of event images corresponded to different days in the family’s life. Participants were asked to memorize which events made up the different sequences (Figure 1C). We further instructed them to learn when during the respective sequence each event occurred. Specifically, we asked participants to learn event times relative to a virtual clock. This clock was running hidden from participants and event images were shown whenever the hidden clock reached the specific event time (Figure 1C, Supplemental Figure 2AB). The task was devised such that participants had to rely on their experience of passing real time and mnemonic construction to infer the times of events.</p>
<p>Specifically, to give participants an indication of virtual time, the hidden clock was made visible 6 times for every presentation of a sequence: once before the first event, once in between successive events, and once after the last event. Participants received no cues about elapsing real time, but had to use their experience of passing real time between virtual time cues to infer the event times relative to the hidden virtual clock. Importantly, the exposure of the hidden clock occurred at random times for each sequence presentation (Supplemental Figure 2CD), with the constraint that it could not be revealed closer than 2 s to a preceding or subsequent event. Thus, participants saw different time cues in each repetition of a sequence. For example, while a specific event always happened at the same virtual time, e.g. 2:07 p.m., the virtual clock could be exposed at any time before the event, e.g. corresponding to 1:32 p.m. in the first repetition of the sequence, and corresponding to 1:17 p.m. in the second repetition. Because true event times were never revealed, participants could not exclusively rely on associative learning to solve the task. Time cues were visible for 1.5 s, but displayed only the time at the start of exposure, i.e. the displayed time did not change within the duration of its presentation.</p>
<p>In short, participants had to combine their experience-based estimates of passing time with the time cues provided by the exposures of the otherwise hidden clock to infer the time at which each event in each sequence took place. Crucially, we varied the speed of the hidden clock between sequences in an effort to partly dissociate real time (in seconds) from virtual time (in virtual hours). Thus, for two sequences more virtual time passed in a comparable amount of real elapsing time (Figure 1C, Supplemental Figure 2). Correlations between the linearly increasing time metrics are inevitably high (Pearson correlation of virtual time with order r=0.969 and virtual time with real time r=0.975). Still this manipulation allowed us to determine using multiple regression whether virtual time explained constructed event times when competing for variance with real elapsed time and event order and whether hippocampal pattern similarity changes related to temporal distances in virtual time beyond ordinal distances and real time distances. Regression models including collinear predictor variables do not result in biased parameter estimates96,97.</p>
</blockquote>
<p>Let’s illustrate some features of the design.</p>
<p>First we need to load the data from the design files. These contain the virtual time (in virtual hours) for each event of each day and the scanner time (in seconds) since the time of the day start.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-1" aria-hidden="true" tabindex="-1"></a>day_id <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>n_days, <span class="at">each =</span> n_events_day)</span>
<span id="cb13-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-2" aria-hidden="true" tabindex="-1"></a>design_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(day_id)</span>
<span id="cb13-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># load design file with virtual time</span></span>
<span id="cb13-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-5" aria-hidden="true" tabindex="-1"></a>fname <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;behavior&quot;</span>, <span class="st">&quot;design&quot;</span>, <span class="st">&quot;daysTime.txt&quot;</span>)</span>
<span id="cb13-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-6" aria-hidden="true" tabindex="-1"></a>csv_txt <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(fname, <span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-7" aria-hidden="true" tabindex="-1"></a>design_tbl<span class="sc">$</span>virtual_time <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(csv_txt)))</span>
<span id="cb13-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># load design file with event times in seconds (after day start), i.e. real time</span></span>
<span id="cb13-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># this is the scanner time</span></span>
<span id="cb13-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-11" aria-hidden="true" tabindex="-1"></a>fname <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;behavior&quot;</span>, <span class="st">&quot;design&quot;</span>, <span class="st">&quot;daysTimeS.txt&quot;</span>)</span>
<span id="cb13-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-12" aria-hidden="true" tabindex="-1"></a>csv_txt <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(fname, <span class="at">header =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-13" aria-hidden="true" tabindex="-1"></a>design_tbl<span class="sc">$</span>scanner_time <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(csv_txt)))</span>
<span id="cb13-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co"># scanner time relative to first image</span></span>
<span id="cb13-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-16" aria-hidden="true" tabindex="-1"></a>design_tbl<span class="sc">$</span>rel_scanner_time <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb13-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-17" aria-hidden="true" tabindex="-1"></a>      design_tbl<span class="sc">$</span>scanner_time[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>] <span class="sc">-</span> design_tbl<span class="sc">$</span>scanner_time[<span class="dv">1</span>], </span>
<span id="cb13-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-18" aria-hidden="true" tabindex="-1"></a>      design_tbl<span class="sc">$</span>scanner_time[<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>] <span class="sc">-</span> design_tbl<span class="sc">$</span>scanner_time[<span class="dv">6</span>], </span>
<span id="cb13-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-19" aria-hidden="true" tabindex="-1"></a>      design_tbl<span class="sc">$</span>scanner_time[<span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>] <span class="sc">-</span> design_tbl<span class="sc">$</span>scanner_time[<span class="dv">11</span>],</span>
<span id="cb13-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb13-20" aria-hidden="true" tabindex="-1"></a>      design_tbl<span class="sc">$</span>scanner_time[<span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>] <span class="sc">-</span> design_tbl<span class="sc">$</span>scanner_time[<span class="dv">16</span>])</span></code></pre></div>
<p>Here are some plots to show some features of the design.</p>
<div id="events-in-virtual-and-real-time" class="section level3 unnumbered">
<h3>Events in virtual and real time</h3>
<p>This plot shows an overview of the design. We have 4 virtual days with 5 events each. The times of these events are shown based on different metrics:</p>
<ul>
<li>The scanner time since the presentation of the first day of an event (global x-axis)</li>
<li>The virtual hours of each days (separate x-axis for each row)</li>
</ul>
<p>In combination, you can see that across days different amounts of virtual time pass for a given amount of scanner time.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># time labels in virtual hours rather than decimals</span></span>
<span id="cb14-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-2" aria-hidden="true" tabindex="-1"></a>design_tbl<span class="sc">$</span>virtual_hours <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">&quot;%02.0f:%02.0f&quot;</span>,</span>
<span id="cb14-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="fu">floor</span>(design_tbl<span class="sc">$</span>virtual_time),</span>
<span id="cb14-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                                    <span class="dv">60</span><span class="sc">*</span>(design_tbl<span class="sc">$</span>virtual_time<span class="sc">-</span><span class="fu">floor</span>(design_tbl<span class="sc">$</span>virtual_time)))</span>
<span id="cb14-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new dataframe to use for plotting virtual time axes</span></span>
<span id="cb14-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-7" aria-hidden="true" tabindex="-1"></a>virt_h_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="sc">-</span><span class="dv">5</span>,<span class="dv">4</span>), <span class="fu">rep</span>(<span class="dv">65</span>,<span class="dv">4</span>)))</span>
<span id="cb14-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-8" aria-hidden="true" tabindex="-1"></a>virt_h_df<span class="sc">$</span>y <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,<span class="dv">2</span>)</span>
<span id="cb14-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create a new dataframe to use for plotting virtual time axes tick marks</span></span>
<span id="cb14-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-11" aria-hidden="true" tabindex="-1"></a>tick_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">rep</span>(design_tbl<span class="sc">$</span>rel_scanner_time, <span class="at">each=</span><span class="dv">2</span>))</span>
<span id="cb14-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-12" aria-hidden="true" tabindex="-1"></a>tick_df<span class="sc">$</span>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.8</span>) <span class="sc">+</span> <span class="fu">rep</span>(design_tbl<span class="sc">$</span>day_id, <span class="at">each=</span><span class="dv">2</span>) <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb14-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-13" aria-hidden="true" tabindex="-1"></a>tick_df<span class="sc">$</span>grp <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">each=</span><span class="dv">2</span>)</span>
<span id="cb14-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-14" aria-hidden="true" tabindex="-1"></a>tick_df<span class="sc">$</span>day <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each=</span><span class="dv">10</span>)</span>
<span id="cb14-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize the plot      </span></span>
<span id="cb14-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(design_tbl, <span class="fu">aes</span>(<span class="at">x =</span> rel_scanner_time, <span class="at">y =</span> day_id, <span class="at">group =</span> day_id)) <span class="sc">+</span></span>
<span id="cb14-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot line for each day</span></span>
<span id="cb14-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add points for the data</span></span>
<span id="cb14-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> virtual_time), <span class="at">colour =</span> <span class="st">&quot;darkgrey&quot;</span>,</span>
<span id="cb14-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb14-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot line for each day that will become virtual time axis</span></span>
<span id="cb14-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> tick_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> day<span class="fl">-0.2</span>, <span class="at">group =</span> day),</span>
<span id="cb14-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extend the axes beyond the events</span></span>
<span id="cb14-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> virt_h_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y<span class="fl">-0.2</span>, <span class="at">group =</span> y),</span>
<span id="cb14-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">linetype =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb14-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add tick marks</span></span>
<span id="cb14-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> tick_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">group =</span> grp),</span>
<span id="cb14-31"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span>, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-32"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add labels with virtual hours</span></span>
<span id="cb14-33"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x =</span> rel_scanner_time, <span class="at">y =</span> day_id<span class="fl">-0.45</span>), <span class="at">size=</span><span class="dv">6</span><span class="sc">*</span><span class="fl">0.352777778</span>,</span>
<span id="cb14-34"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-34" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> design_tbl<span class="sc">$</span>virtual_hours, <span class="at">fill =</span> <span class="st">&quot;#D1D3D4&quot;</span>, <span class="at">label.size =</span> <span class="dv">0</span>,</span>
<span id="cb14-35"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-35" aria-hidden="true" tabindex="-1"></a>             <span class="at">label.padding=</span><span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">&quot;mm&quot;</span>), <span class="at">family=</span>font2use) <span class="sc">+</span> </span>
<span id="cb14-36"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the x- and y-axis range and ticks</span></span>
<span id="cb14-37"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">7</span>,<span class="fl">68.5</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">65</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb14-38"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">4.1</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb14-39"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-39" aria-hidden="true" tabindex="-1"></a>  scico<span class="sc">::</span><span class="fu">scale_fill_scico</span>(<span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.7</span>, <span class="at">palette =</span> <span class="st">&quot;devon&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-40"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set plot title, legend and axis labels</span></span>
<span id="cb14-41"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;seconds since first event&quot;</span>, <span class="at">y =</span> <span class="st">&quot;day&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-42"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it pretty</span></span>
<span id="cb14-43"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb14-44"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;transparent&quot;</span>),</span>
<span id="cb14-45"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">family =</span> font2use),</span>
<span id="cb14-46"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb14-47"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb14-48"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>), </span>
<span id="cb14-49"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">size =</span> <span class="fl">0.5</span>), </span>
<span id="cb14-50"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&#39;black&#39;</span>, <span class="at">size =</span> <span class="fl">0.5</span>),</span>
<span id="cb14-51"><a href="illustrations-of-task-design-and-analysis-logic.html#cb14-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
<div id="events-in-virtual-time" class="section level3 unnumbered">
<h3>Events in virtual time</h3>
<p>Two of the virtual days were short, ranging from 8am to 8pm, and two of the days were long, lasting from 6am until midnight. This can easily be seen if we plot the events in virtual time.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize the plot</span></span>
<span id="cb15-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-2" aria-hidden="true" tabindex="-1"></a>sfiga <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(design_tbl, <span class="fu">aes</span>(<span class="at">x =</span> virtual_time, <span class="at">y =</span> day_id, <span class="at">group =</span> day_id, <span class="at">fill =</span> virtual_time)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot line for each day</span></span>
<span id="cb15-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> ultimate_gray) <span class="sc">+</span></span>
<span id="cb15-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add points for the data</span></span>
<span id="cb15-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> virtual_time), <span class="at">colour =</span> ultimate_gray,</span>
<span id="cb15-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span> </span>
<span id="cb15-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change color </span></span>
<span id="cb15-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  scico<span class="sc">::</span><span class="fu">scale_fill_scico</span>(<span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.7</span>, <span class="at">palette =</span> <span class="st">&quot;devon&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the x-axis range and ticks</span></span>
<span id="cb15-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">24</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">6</span>,<span class="dv">24</span>,<span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb15-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">4.2</span>)) <span class="sc">+</span></span>
<span id="cb15-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set plot title, legend and axis labels</span></span>
<span id="cb15-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;virtual time&quot;</span>, <span class="at">y =</span> <span class="st">&quot;day&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it pretty</span></span>
<span id="cb15-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb15-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;transparent&quot;</span>))</span>
<span id="cb15-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb15-18" aria-hidden="true" tabindex="-1"></a>sfiga</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/Virtual%20time%20for%20each%20event%20on%20each%20of%20the%20four%20days-1.png" width="480" /></p>
</div>
<div id="events-in-real-time" class="section level3 unnumbered">
<h3>Events in real time</h3>
<p>In an effort to dissociate real time (in seconds) from virtual time (in virtual hours), both the long and short days were presented within the same actual time span, i.e. around 60 seconds from the first to the last event. In effect, the hidden clock was running faster for the long days than for the short days.</p>
<p>If we plot the scanner time relative to the presentation of the first event picture of a given day it becomes obvious that for two pairs of days the respective scanner time elapsing between events is almost identical.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize the plot</span></span>
<span id="cb16-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-2" aria-hidden="true" tabindex="-1"></a>sfigb <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(design_tbl, <span class="fu">aes</span>(<span class="at">x =</span> rel_scanner_time, <span class="at">y =</span> day_id, <span class="at">group =</span> day_id, <span class="at">fill =</span> virtual_time)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot line for each day</span></span>
<span id="cb16-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> ultimate_gray) <span class="sc">+</span></span>
<span id="cb16-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add points for the data</span></span>
<span id="cb16-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">fill =</span> virtual_time), <span class="at">colour =</span> ultimate_gray,</span>
<span id="cb16-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span> </span>
<span id="cb16-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change color </span></span>
<span id="cb16-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-9" aria-hidden="true" tabindex="-1"></a>  scico<span class="sc">::</span><span class="fu">scale_fill_scico</span>(<span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.7</span>, <span class="at">palette =</span> <span class="st">&quot;devon&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the x-axis range and ticks</span></span>
<span id="cb16-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">70</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">70</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb16-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">4.2</span>)) <span class="sc">+</span></span>
<span id="cb16-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set plot title, legend and axis labels</span></span>
<span id="cb16-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;seconds since first event&quot;</span>, <span class="at">y =</span> <span class="st">&quot;day&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># make it pretty</span></span>
<span id="cb16-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb16-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="st">&quot;transparent&quot;</span>))</span>
<span id="cb16-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb16-18" aria-hidden="true" tabindex="-1"></a>sfigb</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/Scanner%20time%20relative%20to%20first%20event%20of%20that%20day-1.png" width="480" /></p>
</div>
<div id="correlations-of-virtual-time-with-order-and-real-time" class="section level3 unnumbered">
<h3>Correlations of virtual time with order and real time</h3>
<p>Correlation of virtual time and order: Pearson r=0.969<br />
Correlation of virtual time and real time: Pearson r=0.975<br />
Correlation of order and real time: Pearson r=0.991</p>
</div>
<div id="time-cues-in-virtual-and-real-time" class="section level3 unnumbered">
<h3>Time cues in virtual and real time</h3>
<p>Let’s further illustrate the design for one randomly chosen example subject by plotting the time cues. The virtual times of events were identical for all participants, but the times cues differed between participants.</p>
<p>Prepare the data by loading the logfile from the day learning task and creating a long design table.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">7</span>)</span>
<span id="cb17-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-2" aria-hidden="true" tabindex="-1"></a>i_sub <span class="ot">&lt;-</span> <span class="fu">sample</span>(subjects,<span class="dv">1</span>)</span>
<span id="cb17-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a long version of the design table by repeating each row 7 times,</span></span>
<span id="cb17-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># i.e. once for each repetition</span></span>
<span id="cb17-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-6" aria-hidden="true" tabindex="-1"></a>design_tbl_long <span class="ot">&lt;-</span> design_tbl <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(), <span class="at">each =</span> <span class="dv">7</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rep =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>), n_days<span class="sc">*</span>n_events_day),</span>
<span id="cb17-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">day_id =</span> <span class="fu">factor</span>(<span class="fu">sprintf</span>(<span class="st">&quot;day %d&quot;</span>, day_id), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;day 4&quot;</span>, <span class="st">&quot;day 3&quot;</span>, <span class="st">&quot;day 2&quot;</span>, <span class="st">&quot;day 1&quot;</span>)))</span>
<span id="cb17-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># load the logfile and store as tibble</span></span>
<span id="cb17-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-12" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">file.path</span>(dirs<span class="sc">$</span>dlt_log_dir, <span class="fu">sprintf</span>(<span class="st">&quot;P%s-virtemdata.txt&quot;</span>, i_sub))</span>
<span id="cb17-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-13" aria-hidden="true" tabindex="-1"></a>dlt_log <span class="ot">&lt;-</span> <span class="fu">read.table</span>(fn)</span>
<span id="cb17-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(dlt_log) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;fc_on&#39;</span>, <span class="st">&#39;fc_off&#39;</span>, <span class="st">&#39;cue_start&#39;</span>, <span class="st">&#39;cue_id&#39;</span>, <span class="st">&#39;cue_end&#39;</span>, </span>
<span id="cb17-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-15" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&#39;vol&#39;</span>, <span class="st">&#39;rep&#39;</span>, <span class="st">&#39;real_time&#39;</span>, <span class="st">&#39;day&#39;</span>, <span class="st">&#39;trial_endtime&#39;</span>)</span>
<span id="cb17-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-16" aria-hidden="true" tabindex="-1"></a>dlt_log <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(dlt_log)</span>
<span id="cb17-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co"># save the time cue log entries for each day and repetition</span></span>
<span id="cb17-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-19" aria-hidden="true" tabindex="-1"></a>timecue_log <span class="ot">&lt;-</span> dlt_log <span class="sc">%&gt;%</span> </span>
<span id="cb17-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(day, rep) <span class="sc">%&gt;%</span> <span class="co"># log entries for each of day repetition</span></span>
<span id="cb17-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rel_scanner_time =</span> real_time <span class="sc">-</span>real_time[<span class="dv">2</span>]) <span class="sc">%&gt;%</span> <span class="co"># add real time relative to first event</span></span>
<span id="cb17-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">11</span>,<span class="dv">2</span>)) <span class="sc">%&gt;%</span> <span class="co"># keep only the odd entries, which are the time cues</span></span>
<span id="cb17-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">virtual_time_dec =</span> <span class="fu">floor</span>(cue_id)<span class="sc">+</span>((cue_id<span class="sc">-</span><span class="fu">floor</span>(cue_id))<span class="sc">/</span>.<span class="dv">6</span>), <span class="co"># virtual time in decimals as in design table</span></span>
<span id="cb17-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_id =</span> <span class="fu">factor</span>(<span class="fu">sprintf</span>(<span class="st">&quot;day %d&quot;</span>, day), <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;day 4&quot;</span>, <span class="st">&quot;day 3&quot;</span>, <span class="st">&quot;day 2&quot;</span>, <span class="st">&quot;day 1&quot;</span>))</span>
<span id="cb17-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb17-27" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Then let’s plot the events and time cues relative to virtual time, separately for the different repetitions of each day.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># virtual time</span></span>
<span id="cb18-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-2" aria-hidden="true" tabindex="-1"></a>sfigc <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(timecue_log, <span class="fu">aes</span>(<span class="at">x=</span>virtual_time_dec, <span class="at">y=</span>rep, <span class="at">group =</span> rep)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">colour =</span> ultimate_gray) <span class="sc">+</span></span>
<span id="cb18-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">18</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb18-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>design_tbl_long, <span class="fu">aes</span>(<span class="at">x=</span>virtual_time, <span class="at">y=</span>rep, <span class="at">fill =</span> virtual_time),</span>
<span id="cb18-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, <span class="at">color =</span> ultimate_gray, <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb18-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-7" aria-hidden="true" tabindex="-1"></a>  scico<span class="sc">::</span><span class="fu">scale_fill_scico</span>(<span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.7</span>, <span class="at">palette =</span> <span class="st">&quot;devon&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>day_id, <span class="at">ncol=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">24</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">6</span>,<span class="dv">24</span>,<span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb18-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">8</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb18-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;virtual time&quot;</span>, <span class="at">y =</span> <span class="st">&quot;repetition&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb18-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_blank</span>(), <span class="co">#strip.text = element_blank(),</span></span>
<span id="cb18-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb18-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb18-15" aria-hidden="true" tabindex="-1"></a>sfigc</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Lastly, let’s plot the events and time cues in real time relative to the first event of a given day, separately for the different repetitions of each day.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># real time relative to first event of the day</span></span>
<span id="cb19-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-2" aria-hidden="true" tabindex="-1"></a>sfigd <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(timecue_log, <span class="fu">aes</span>(<span class="at">x=</span>rel_scanner_time, <span class="at">y=</span>rep, <span class="at">group =</span> rep)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;darkgrey&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">18</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb19-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data=</span>design_tbl_long, <span class="fu">aes</span>(<span class="at">x=</span>rel_scanner_time, <span class="at">y=</span>rep, <span class="at">fill =</span> virtual_time),</span>
<span id="cb19-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">&quot;darkgrey&quot;</span>, <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  scico<span class="sc">::</span><span class="fu">scale_fill_scico</span>(<span class="at">begin =</span> <span class="fl">0.1</span>, <span class="at">end =</span> <span class="fl">0.7</span>, <span class="at">palette =</span> <span class="st">&quot;devon&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>day_id, <span class="at">ncol=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">8</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">7</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb19-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">70</span>), <span class="at">breaks=</span><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">70</span>,<span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb19-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;seconds since first event&quot;</span>, <span class="at">y =</span> <span class="st">&quot;repetition&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_cowplot</span>() <span class="sc">+</span></span>
<span id="cb19-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_blank</span>(), <span class="co">#strip.text = element_blank(),</span></span>
<span id="cb19-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb19-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb19-15" aria-hidden="true" tabindex="-1"></a>sfigd</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="supplemental-figure-for-task-design" class="section level3 unnumbered">
<h3>Supplemental figure for task design</h3>
<p>Now we are ready to compose the figure, which will go to the supplement.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-1" aria-hidden="true" tabindex="-1"></a>layout <span class="ot">=</span> <span class="st">&quot;</span></span>
<span id="cb20-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="st">AB</span></span>
<span id="cb20-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="st">CD</span></span>
<span id="cb20-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="st">CD</span></span>
<span id="cb20-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="st">CD</span></span>
<span id="cb20-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="st">CD</span></span>
<span id="cb20-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="st">CD&quot;</span></span>
<span id="cb20-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-9" aria-hidden="true" tabindex="-1"></a>sfig <span class="ot">&lt;-</span> sfiga <span class="sc">+</span> sfigb <span class="sc">+</span> sfigc <span class="sc">+</span> sfigd <span class="sc">+</span></span>
<span id="cb20-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">design =</span> layout, <span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb20-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">10</span>, <span class="at">family=</span>font2use),</span>
<span id="cb20-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb20-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb20-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">8</span>),</span>
<span id="cb20-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title.align =</span> <span class="dv">0</span>,</span>
<span id="cb20-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;right&quot;</span>,</span>
<span id="cb20-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb20-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="dv">3</span>,<span class="st">&quot;mm&quot;</span>)) <span class="sc">&amp;</span></span>
<span id="cb20-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorbar</span>(<span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb20-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-20" aria-hidden="true" tabindex="-1"></a>                               <span class="at">title.hjust =</span> <span class="fl">0.5</span>)) <span class="sc">&amp;</span></span>
<span id="cb20-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;virtual</span><span class="sc">\n</span><span class="st">time&quot;</span>) <span class="sc">&amp;</span></span>
<span id="cb20-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">theme =</span> <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t=</span><span class="dv">0</span>, <span class="at">r=</span><span class="sc">-</span><span class="dv">5</span>, <span class="at">b=</span><span class="sc">-</span><span class="dv">8</span>, <span class="at">l=</span><span class="sc">-</span><span class="dv">5</span>, <span class="at">unit=</span><span class="st">&quot;pt&quot;</span>)),</span>
<span id="cb20-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">tag_levels =</span> <span class="st">&#39;A&#39;</span>)</span>
<span id="cb20-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co"># save as png and pdf and print to screen</span></span>
<span id="cb20-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-26" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;figures&quot;</span>, <span class="st">&quot;sf02&quot;</span>)</span>
<span id="cb20-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.pdf&quot;</span>), <span class="at">plot=</span>sfig, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb20-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="fl">17.4</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> cairo_pdf)</span>
<span id="cb20-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.png&quot;</span>), <span class="at">plot=</span>sfig, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb20-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb20-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">width =</span> <span class="fl">17.4</span>, <span class="at">height =</span> <span class="dv">17</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> <span class="st">&quot;png&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="/data/pt_02261/virtem/figures/sf02.png" alt="" />
<p class="caption">Supplemental Figure 2. Design of the day learning task. A. Each of the four virtual days consisted of a sequence of five events. Event sequences are shown in virtual time, i.e. relative to the hidden clock. Less virtual time passes within the bottom two sequences because clock speed was manipulated between sequences. B. Event sequences shown in real time relative to the first event. A comparable amount of real time (in seconds) elapses during each event sequence despite different amounts of virtual time passing. C, D. Sequences in virtual and real time as shown in (A) and (B), respectively, but separately for each of the seven repetitions of each sequence during the learning task. Black diamonds indicate the time cues shown to one randomly chosen example participant during the task. Time cues varied across repetitions and differed across participants.</p>
</div>
</div>
</div>
<div id="representational-similarity-analysis-logic" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Representational Similarity Analysis Logic</h2>
<p>To illustrate the logic of the RSA on representational change, let’s create some matrices that will be used in the analysis logic figure of the manuscript.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># some general params</span></span>
<span id="cb21-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb21-2" aria-hidden="true" tabindex="-1"></a>day <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each=</span><span class="dv">5</span>)</span>
<span id="cb21-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb21-3" aria-hidden="true" tabindex="-1"></a>event <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">4</span>)</span></code></pre></div>
<p>We start with a random matrix of similarity values in the pre-learning scan. There should be no pattern.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CREATE AND PLOT NOISE MATRIX FOR PRE-SIMILARITY</span></span>
<span id="cb22-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-2" aria-hidden="true" tabindex="-1"></a>pre_sim_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">400</span>, <span class="sc">-</span><span class="fl">0.8</span>, <span class="fl">0.8</span>), n_days<span class="sc">*</span>n_events_day, n_days<span class="sc">*</span>n_events_day)</span>
<span id="cb22-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># make data frame from matrix and add variables for plotting</span></span>
<span id="cb22-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-5" aria-hidden="true" tabindex="-1"></a>pre_sim_mat[<span class="fu">lower.tri</span>(pre_sim_mat, <span class="at">diag=</span><span class="cn">TRUE</span>)]<span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb22-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-6" aria-hidden="true" tabindex="-1"></a>pre_sim_df <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(pre_sim_mat) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">day1 =</span> day[Var1],</span>
<span id="cb22-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">day2 =</span> day[Var2],</span>
<span id="cb22-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_comb =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d_%d&quot;</span>, day1, day2),</span>
<span id="cb22-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">same_day =</span> day1<span class="sc">==</span>day2)</span>
<span id="cb22-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb22-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-15" aria-hidden="true" tabindex="-1"></a>fig_pre_sim <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> pre_sim_df, <span class="fu">aes</span>(<span class="at">x=</span>Var1, <span class="at">y=</span>Var2, <span class="at">fill=</span>value)) <span class="sc">+</span> </span>
<span id="cb22-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>()<span class="sc">+</span></span>
<span id="cb22-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;black&quot;</span>, <span class="at">na.value =</span> <span class="cn">NA</span>,</span>
<span id="cb22-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">range</span>(pre_sim_df<span class="sc">$</span>value), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>)) <span class="sc">+</span></span>
<span id="cb22-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">19.5</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">20.5</span>,<span class="fl">0.5</span>),</span>
<span id="cb22-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;similarity&quot;</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb22-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-22" aria-hidden="true" tabindex="-1"></a>                             <span class="at">title.hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb22-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>, </span>
<span id="cb22-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb22-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb22-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks=</span><span class="fu">element_blank</span>(),</span>
<span id="cb22-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb22-31"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>))</span>
<span id="cb22-32"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="co"># save and print</span></span>
<span id="cb22-34"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-34" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;figures&quot;</span>, <span class="st">&quot;f3_pre_sim&quot;</span>)</span>
<span id="cb22-35"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.pdf&quot;</span>), <span class="at">plot=</span>fig_pre_sim, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb22-36"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> cairo_pdf)</span>
<span id="cb22-37"><a href="illustrations-of-task-design-and-analysis-logic.html#cb22-37" aria-hidden="true" tabindex="-1"></a>fig_pre_sim</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>To plot the RSA prediction matrix, we generate a matrix that has the pairwise temporal distances between events in its cell. We also generate a similarity matrix that mirrors our effects in the hippocampus, e.g. where similarity increases with distance within a sequence and decreases with distance between sequences.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CREATE DISTANCE AND IDEALIZED SIMILARITY CHANGE MATRICES</span></span>
<span id="cb23-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># load design file with virtual time</span></span>
<span id="cb23-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-4" aria-hidden="true" tabindex="-1"></a>fname <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;behavior&quot;</span>, <span class="st">&quot;design&quot;</span>, <span class="st">&quot;daysTime.txt&quot;</span>)</span>
<span id="cb23-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-5" aria-hidden="true" tabindex="-1"></a>virtual_time <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(fname, <span class="at">col_names =</span> <span class="cn">FALSE</span>, <span class="at">col_types =</span> <span class="st">&quot;ddddd&quot;</span>)</span>
<span id="cb23-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-6" aria-hidden="true" tabindex="-1"></a>virtual_time <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(virtual_time)))</span>
<span id="cb23-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-8" aria-hidden="true" tabindex="-1"></a>dist_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, n_days<span class="sc">*</span>n_events_day, n_days<span class="sc">*</span>n_events_day)</span>
<span id="cb23-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-9" aria-hidden="true" tabindex="-1"></a>change_sim_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, n_days<span class="sc">*</span>n_events_day, n_days<span class="sc">*</span>n_events_day)</span>
<span id="cb23-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># loop over all pairs of events</span></span>
<span id="cb23-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i1 <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>){</span>
<span id="cb23-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i2 <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>){</span>
<span id="cb23-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># temporal distance for this pair</span></span>
<span id="cb23-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-15" aria-hidden="true" tabindex="-1"></a>    dist_mat[i1,i2] <span class="ot">&lt;-</span> <span class="fu">abs</span>(virtual_time[i2]<span class="sc">-</span>virtual_time[i1])</span>
<span id="cb23-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb23-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># similarity depends on whether we are in the same day or not</span></span>
<span id="cb23-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(day[i1]<span class="sc">==</span>day[i2]){</span>
<span id="cb23-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-19" aria-hidden="true" tabindex="-1"></a>      change_sim_mat[i1,i2] <span class="ot">&lt;-</span> <span class="fu">abs</span>(virtual_time[i2]<span class="sc">-</span>virtual_time[i1])} </span>
<span id="cb23-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> {</span>
<span id="cb23-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-21" aria-hidden="true" tabindex="-1"></a>      change_sim_mat[i1,i2] <span class="ot">&lt;-</span> <span class="fu">range</span>(virtual_time)[<span class="dv">2</span>]<span class="sc">-</span><span class="fu">range</span>(virtual_time)[<span class="dv">1</span>]<span class="sc">-</span><span class="fu">abs</span>(virtual_time[i2]<span class="sc">-</span>virtual_time[i1])}</span>
<span id="cb23-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="co"># PLOT DISTANCE MATRIX</span></span>
<span id="cb23-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="co"># remove lower triangle from distance matrix</span></span>
<span id="cb23-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-27" aria-hidden="true" tabindex="-1"></a>dist_mat[<span class="fu">lower.tri</span>(dist_mat, <span class="at">diag=</span><span class="cn">TRUE</span>)]<span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb23-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-29" aria-hidden="true" tabindex="-1"></a><span class="co"># make data frame from matrix and add variables for plotting</span></span>
<span id="cb23-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-30" aria-hidden="true" tabindex="-1"></a>dist_df <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(dist_mat) <span class="sc">%&gt;%</span></span>
<span id="cb23-31"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb23-32"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-33"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">day1 =</span> day[Var1],</span>
<span id="cb23-34"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">day2 =</span> day[Var2],</span>
<span id="cb23-35"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_comb =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d_%d&quot;</span>, day1, day2),</span>
<span id="cb23-36"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-36" aria-hidden="true" tabindex="-1"></a>                            <span class="at">same_day =</span> day1<span class="sc">==</span>day2)</span>
<span id="cb23-37"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-38"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-38" aria-hidden="true" tabindex="-1"></a><span class="co"># plot distance matrix</span></span>
<span id="cb23-39"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-39" aria-hidden="true" tabindex="-1"></a>fig_dist_mat <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> dist_df, <span class="fu">aes</span>(<span class="at">x=</span>Var1, <span class="at">y=</span>Var2, <span class="at">fill=</span>value)) <span class="sc">+</span> </span>
<span id="cb23-40"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>()<span class="sc">+</span></span>
<span id="cb23-41"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;black&quot;</span>, <span class="at">na.value =</span> <span class="cn">NA</span>,</span>
<span id="cb23-42"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-42" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">4</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>)) <span class="sc">+</span></span>
<span id="cb23-43"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">19.5</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">20.5</span>,<span class="fl">0.5</span>),</span>
<span id="cb23-44"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-44" aria-hidden="true" tabindex="-1"></a>              <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb23-45"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;temporal distance&quot;</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb23-46"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-46" aria-hidden="true" tabindex="-1"></a>                             <span class="at">title.hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb23-47"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>, </span>
<span id="cb23-48"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb23-49"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb23-50"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks=</span><span class="fu">element_blank</span>(),</span>
<span id="cb23-51"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-52"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-53"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-54"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-54" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb23-55"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)) <span class="sc">+</span></span>
<span id="cb23-56"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-56" aria-hidden="true" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_rect</span>(<span class="fu">aes</span>(<span class="at">group =</span> day_comb, <span class="at">filter =</span> same_day<span class="sc">==</span><span class="cn">FALSE</span>), </span>
<span id="cb23-57"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-57" aria-hidden="true" tabindex="-1"></a>                          <span class="at">expand =</span> <span class="fl">0.018</span>, <span class="at">radius =</span> <span class="dv">0</span>, </span>
<span id="cb23-58"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-58" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color=</span><span class="fu">unname</span>(aHPC_colors[<span class="st">&quot;across_main&quot;</span>]), <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb23-59"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-59" aria-hidden="true" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_rect</span>(<span class="fu">aes</span>(<span class="at">group =</span> day_comb, <span class="at">filter =</span> same_day<span class="sc">==</span><span class="cn">TRUE</span>), </span>
<span id="cb23-60"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-60" aria-hidden="true" tabindex="-1"></a>                          <span class="at">expand =</span> <span class="fl">0.018</span>, <span class="at">radius =</span> <span class="dv">0</span>, </span>
<span id="cb23-61"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-61" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color=</span><span class="fu">unname</span>(aHPC_colors[<span class="st">&quot;within_main&quot;</span>]), <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="fl">0.5</span>)</span>
<span id="cb23-62"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-63"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-63" aria-hidden="true" tabindex="-1"></a><span class="co"># save and print</span></span>
<span id="cb23-64"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-64" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;figures&quot;</span>, <span class="st">&quot;f3_dist_mat&quot;</span>)</span>
<span id="cb23-65"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-65" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.pdf&quot;</span>), <span class="at">plot=</span>fig_dist_mat, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb23-66"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-66" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> cairo_pdf)</span>
<span id="cb23-67"><a href="illustrations-of-task-design-and-analysis-logic.html#cb23-67" aria-hidden="true" tabindex="-1"></a>fig_dist_mat</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># PLOT SIMILARITY CHANGE MATRIX</span></span>
<span id="cb24-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># add noise to change similarity matrix (uniform distribution)</span></span>
<span id="cb24-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-3" aria-hidden="true" tabindex="-1"></a>change_sim_mat <span class="ot">&lt;-</span> change_sim_mat<span class="sc">+</span> <span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">400</span>, <span class="sc">-</span><span class="fl">0.4</span>, <span class="fl">0.4</span>), <span class="fu">dim</span>(change_sim_mat)[<span class="dv">1</span>])</span>
<span id="cb24-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># remove lower triangle from similarity change matrix</span></span>
<span id="cb24-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-6" aria-hidden="true" tabindex="-1"></a>change_sim_mat[<span class="fu">lower.tri</span>(change_sim_mat, <span class="at">diag=</span><span class="cn">TRUE</span>)]<span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb24-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># make data frame from matrix and add variables for plotting</span></span>
<span id="cb24-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-9" aria-hidden="true" tabindex="-1"></a>change_sim_df <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(change_sim_mat) <span class="sc">%&gt;%</span></span>
<span id="cb24-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb24-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">day1 =</span> day[Var1],</span>
<span id="cb24-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">day2 =</span> day[Var2],</span>
<span id="cb24-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_comb =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d_%d&quot;</span>, day1, day2),</span>
<span id="cb24-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">same_day =</span> day1<span class="sc">==</span>day2)</span>
<span id="cb24-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb24-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-18" aria-hidden="true" tabindex="-1"></a>fig_sim_change <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> change_sim_df, <span class="fu">aes</span>(<span class="at">x=</span>Var1, <span class="at">y=</span>Var2, <span class="at">fill=</span>value)) <span class="sc">+</span> </span>
<span id="cb24-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>()<span class="sc">+</span></span>
<span id="cb24-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;black&quot;</span>, <span class="at">na.value =</span> <span class="cn">NA</span>,</span>
<span id="cb24-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">range</span>(change_sim_df<span class="sc">$</span>value), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>)) <span class="sc">+</span></span>
<span id="cb24-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">19.5</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">20.5</span>,<span class="fl">0.5</span>),</span>
<span id="cb24-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;similarity&quot;</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb24-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-25" aria-hidden="true" tabindex="-1"></a>                             <span class="at">title.hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb24-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>, </span>
<span id="cb24-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb24-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb24-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks=</span><span class="fu">element_blank</span>(),</span>
<span id="cb24-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-31"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-32"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-33"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb24-34"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)) <span class="sc">+</span></span>
<span id="cb24-35"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-35" aria-hidden="true" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_rect</span>(<span class="fu">aes</span>(<span class="at">group =</span> day_comb, <span class="at">filter =</span> same_day<span class="sc">==</span><span class="cn">FALSE</span>), </span>
<span id="cb24-36"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-36" aria-hidden="true" tabindex="-1"></a>                          <span class="at">expand =</span> <span class="fl">0.018</span>, <span class="at">radius =</span> <span class="dv">0</span>, </span>
<span id="cb24-37"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-37" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color=</span><span class="fu">unname</span>(aHPC_colors[<span class="st">&quot;across_main&quot;</span>]), <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb24-38"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-38" aria-hidden="true" tabindex="-1"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_rect</span>(<span class="fu">aes</span>(<span class="at">group =</span> day_comb, <span class="at">filter =</span> same_day<span class="sc">==</span><span class="cn">TRUE</span>), </span>
<span id="cb24-39"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-39" aria-hidden="true" tabindex="-1"></a>                          <span class="at">expand =</span> <span class="fl">0.018</span>, <span class="at">radius =</span> <span class="dv">0</span>, </span>
<span id="cb24-40"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-40" aria-hidden="true" tabindex="-1"></a>                          <span class="at">color=</span><span class="fu">unname</span>(aHPC_colors[<span class="st">&quot;within_main&quot;</span>]), <span class="at">fill=</span><span class="cn">NA</span>, <span class="at">size=</span><span class="fl">0.5</span>)</span>
<span id="cb24-41"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-42"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-42" aria-hidden="true" tabindex="-1"></a><span class="co"># save and print</span></span>
<span id="cb24-43"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-43" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;figures&quot;</span>, <span class="st">&quot;f3_sim_change&quot;</span>)</span>
<span id="cb24-44"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-44" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.pdf&quot;</span>), <span class="at">plot=</span>fig_sim_change, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb24-45"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-45" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> cairo_pdf)</span>
<span id="cb24-46"><a href="illustrations-of-task-design-and-analysis-logic.html#cb24-46" aria-hidden="true" tabindex="-1"></a>fig_sim_change</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-21-2.png" width="672" /></p>
<p>Lastly, we create a post-similarity matrix, which is the sum of the simulated pre-learning and the similarity change matrix.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CREATE AND PLOT POST SIMILARITY MATRIX</span></span>
<span id="cb25-2"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># post similarity is sum of pre similarity and change similarity</span></span>
<span id="cb25-3"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-3" aria-hidden="true" tabindex="-1"></a>post_sim_mat <span class="ot">&lt;-</span> pre_sim_mat <span class="sc">+</span> change_sim_mat</span>
<span id="cb25-4"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># remove lower triangle from similarity change matrix</span></span>
<span id="cb25-6"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-6" aria-hidden="true" tabindex="-1"></a>post_sim_mat[<span class="fu">lower.tri</span>(post_sim_mat, <span class="at">diag=</span><span class="cn">TRUE</span>)]<span class="ot">&lt;-</span><span class="cn">NA</span></span>
<span id="cb25-7"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># make data frame from matrix and add variables for plotting</span></span>
<span id="cb25-9"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-9" aria-hidden="true" tabindex="-1"></a>post_sim_df <span class="ot">&lt;-</span> reshape2<span class="sc">::</span><span class="fu">melt</span>(post_sim_mat) <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(value)) <span class="sc">%&gt;%</span></span>
<span id="cb25-11"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-12"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">day1 =</span> day[Var1],</span>
<span id="cb25-13"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">day2 =</span> day[Var2],</span>
<span id="cb25-14"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_comb =</span> <span class="fu">sprintf</span>(<span class="st">&quot;%d_%d&quot;</span>, day1, day2),</span>
<span id="cb25-15"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">same_day =</span> day1<span class="sc">==</span>day2)</span>
<span id="cb25-16"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb25-18"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-18" aria-hidden="true" tabindex="-1"></a>fig_post_sim <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> post_sim_df, <span class="fu">aes</span>(<span class="at">x=</span>Var1, <span class="at">y=</span>Var2, <span class="at">fill=</span>value)) <span class="sc">+</span> </span>
<span id="cb25-19"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>()<span class="sc">+</span></span>
<span id="cb25-20"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;white&quot;</span>, <span class="at">high=</span><span class="st">&quot;black&quot;</span>, <span class="at">na.value =</span> <span class="cn">NA</span>,</span>
<span id="cb25-21"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-21" aria-hidden="true" tabindex="-1"></a>                      <span class="at">breaks =</span> <span class="fu">range</span>(post_sim_df<span class="sc">$</span>value), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>)) <span class="sc">+</span></span>
<span id="cb25-22"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">0.5</span>,<span class="fl">19.5</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="fl">20.5</span>,<span class="fl">0.5</span>),</span>
<span id="cb25-23"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">expand =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb25-24"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill=</span><span class="fu">guide_colorbar</span>(<span class="at">title =</span> <span class="st">&quot;similarity&quot;</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb25-25"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-25" aria-hidden="true" tabindex="-1"></a>                             <span class="at">title.hjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span></span>
<span id="cb25-26"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>, </span>
<span id="cb25-27"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title=</span><span class="fu">element_blank</span>(),</span>
<span id="cb25-28"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_blank</span>(),</span>
<span id="cb25-29"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks=</span><span class="fu">element_blank</span>(),</span>
<span id="cb25-30"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-31"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-32"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-33"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>,</span>
<span id="cb25-34"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin=</span><span class="fu">unit</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>))</span>
<span id="cb25-35"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-36"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-36" aria-hidden="true" tabindex="-1"></a><span class="co"># save</span></span>
<span id="cb25-37"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-37" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">&quot;figures&quot;</span>, <span class="st">&quot;f3_post_sim&quot;</span>)</span>
<span id="cb25-38"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="fu">paste0</span>(fn, <span class="st">&quot;.pdf&quot;</span>), <span class="at">plot=</span>fig_post_sim, <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>,</span>
<span id="cb25-39"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-39" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">2</span>, <span class="at">height =</span> <span class="dv">2</span>, <span class="at">dpi =</span> <span class="st">&quot;retina&quot;</span>, <span class="at">device =</span> cairo_pdf)</span>
<span id="cb25-40"><a href="illustrations-of-task-design-and-analysis-logic.html#cb25-40" aria-hidden="true" tabindex="-1"></a>fig_post_sim</span></code></pre></div>
<p><img src="virtem_book_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analysis-setup.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="prepare-behavioral-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
